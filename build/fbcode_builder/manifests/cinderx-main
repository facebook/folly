# For building CinderX against CPython main.
# Note that externally this can be broken  because in that environment we will
# be checking out the head of the CPython repo. However CinderX is only built
# and tested against our internal copy of CPython which updates ~daily, and so
# may be behind CPython head.

[manifest]
name = cinderx-main
fbsource_path = fbcode/cinderx
shipit_project = facebookincubator/cinderx

[git]
repo_url = https://github.com/facebookincubator/cinderx.git

[build.os=linux]
builder = setup-py

[build.not(os=linux)]
builder = nop

[dependencies]
python-setuptools
python-main

[shipit.pathmap]
fbcode/cinderx = cinderx
fbcode/cinderx/oss_toplevel = .

[setup-py.test]
python_script = cinderx/PythonLib/test_cinderx/test_oss_quick.py

[setup-py.env]
CINDERX_ENABLE_PGO=1
CINDERX_ENABLE_LTO=1
